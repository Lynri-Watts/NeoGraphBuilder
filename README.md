# NeoGraphBuilder - 基于Neo4j图数据库的PDF文献知识图谱构建工具

## 项目简介

NeoGraphBuilder是一个专业的知识图谱生成工具，**基于高性能Neo4j图数据库**，能够从PDF文献中自动提取结构化知识，构建概念和实体之间的关系网络。Neo4j的图数据库结构为复杂关系查询提供了卓越的性能优势，远超传统关系型数据库。该工具通过大模型提取、多维度相似度匹配和智能合并机制，确保生成的知识图谱具有高质量和准确性。

目前该项目尚未达到生产标准，主要功能仍在开发中。我们愿意积极接受社区贡献，包括但不限于：

- 报告错误或问题
- 建议新功能或改进
- 提交代码变更（请先创建issue讨论）

## 核心功能

- **基于Neo4j的高效图数据库存储**：利用图数据结构优势，实现**毫秒级复杂关系查询**，对于深度连接的知识网络具有显著性能优势
- **PDF文本提取**：高效从PDF文件中提取文本内容
- **智能文本分块**：支持带重叠的文本分块，确保上下文连续性
- **知识实体提取**：通过大模型准确识别概念和实体
- **多维度相似度匹配**：支持精确匹配、别名匹配、模糊匹配，确保实体对齐的准确性。**本项目开创性地引入了基于Neo4j向量查询优化的向量相似度实体对齐方法，结合了现代NLP技术对语义的精准把控同时避免因节点过多造成的查询效率问题。**
- **智能知识合并**：自动合并相似节点和关系，避免知识图谱冗余，保持知识的一致性和完整性
- **详细报告生成**：生成包含统计数据和可视化图表的综合报告
- **灵活配置选项**：支持自定义分块大小、重叠大小等参数

## 安装说明

### 1. 环境要求

- Python 3.8+
- Neo4j 5.0+
- 大模型服务（支持OpenAI API格式）

### 2. 安装依赖

```bash
# 克隆仓库
git clone <repository-url>
cd <repository-folder>

# 创建虚拟环境（推荐）
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt

# 下载spaCy英文模型
python -m spacy download en_core_web_sm
```

### 3. 配置Neo4j数据库

确保Neo4j数据库服务已启动，并在项目中配置正确的连接信息。默认配置为：
- URI: neo4j://127.0.0.1:7687
- 用户名: neo4j
- 密码: 12345678

### 4. 配置大模型服务

默认配置使用本地大模型服务，地址为：http://localhost:8001/v1

## 使用方法

### 基本使用

```bash
python main.py --pdf-path <path_to_your_pdf_file>
```

### 自定义参数

```bash
python main.py \
    --pdf-path <path_to_your_pdf_file> \
    --chunk-size 5000 \
    --overlap-size 500 \
    --disable-report
```

参数说明：
- `--pdf-path`: PDF文件路径（必需）
- `--chunk-size`: 文本分块大小（默认：5000字符）
- `--overlap-size`: 块之间的重叠大小（默认：500字符）
- `--disable-report`: 禁用报告生成（可选）

## 项目结构

```
├── main.py            # 主程序入口
├── workflow.py        # 知识提取和处理工作流
├── database.py        # 数据库连接和操作
├── requirements.txt   # 项目依赖
├── .gitignore         # Git忽略文件
├── reports/           # 生成的报告目录
└── README.md          # 项目文档
```

## 输出结果

程序执行完成后，将在`reports`目录下生成以下文件：

1. **JSON报告文件**：包含处理统计信息、节点和关系的详细数据
2. **可视化图表**：包括知识图谱结构分析、相似度匹配分布等图表

## 知识图谱结构

知识图谱中的节点分为两种类型：

- **Concept**（概念）：抽象的概念、理论、思想、学科等非实体事物，或者实体所属的类别
- **Entity**（实体）：现实中唯一存在的具体事物，必须满足无歧义、能够脱离语境单独存在等条件

关系包含源节点、目标节点、关系类型和权重等属性。

**Neo4j优势**：
- **高效查询性能**：对于复杂的多跳关系查询，Neo4j能够提供线性性能，而传统关系型数据库通常是指数级增长
- **直观的数据建模**：图数据模型自然映射知识网络结构，无需复杂的表连接操作
- **可视化支持**：内置强大的可视化工具，便于直观理解知识图谱结构和关系模式
- **可扩展性**：支持大规模知识图谱存储和查询，适应不断增长的数据需求

## 注意事项

1. 确保Neo4j数据库服务在使用前已启动
2. 对于大文件，可能需要调整分块大小以获得更好的性能
3. 报告生成需要matplotlib和seaborn库的支持
4. 如果知识提取结果不理想，可以调整workflow.py中的提示词模板